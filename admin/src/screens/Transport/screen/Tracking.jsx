import React, { useEffect, useState } from "react";
import Grid from "@mui/material/Grid";

import TrackingLeftSide from "../components/Tracking/TrackingLeftSide";
import TrackingRightSide from "../components/Tracking/TrackingRightSide";
import axios from "axios";

const Tracking = () => {
  const [routes, setRoutes] = useState([]);
  const [selectedRoute, setSelectedRoute] = useState({
    _id: "645da4a6f7c4155d727143d6",
    routeId: "RT163267",
    driverId: "Mayura Sandakalum",
    vehicleId: "VEH4C5JM",
    supplierIds: '["SUPG005","SUPG009","SUPG007"]',
    createdDate: "2023-05-12T02:29:58.734Z",
    status: "Waiting",
    totalWeight: 0,
    coordinates:
      "[[81.06224,6.9777],[81.06224,6.9777],[81.06199,6.978176],[81.061554,6.978998],[81.060782,6.98064],[81.060684,6.980856],[81.060618,6.980914],[81.060267,6.981089],[81.060036,6.981293],[81.060028,6.981422],[81.06002,6.981552],[81.059992,6.981891],[81.05999,6.981977],[81.059815,6.981974],[81.059478,6.982062],[81.059207,6.982222],[81.059056,6.982375],[81.058902,6.982826],[81.058746,6.983143],[81.058603,6.983482],[81.058513,6.983752],[81.058224,6.984471],[81.05796,6.985051],[81.057762,6.985508],[81.057515,6.986098],[81.057458,6.98629],[81.05738,6.986734],[81.057256,6.987576],[81.057169,6.988198],[81.05708,6.989319],[81.057057,6.989409],[81.057007,6.989603],[81.056982,6.989697],[81.056943,6.98982],[81.056807,6.989847],[81.056669,6.989877],[81.056522,6.989907],[81.056253,6.989982],[81.056135,6.99003],[81.056098,6.990048],[81.056071,6.990062],[81.055325,6.990522],[81.055081,6.990648],[81.054945,6.990699],[81.054867,6.990729],[81.05474,6.990769],[81.054398,6.990797],[81.054316,6.990817],[81.054429,6.991516],[81.054485,6.992006],[81.054426,6.992646],[81.054395,6.993077],[81.05441,6.993272],[81.054389,6.993392],[81.05441,6.993272],[81.054395,6.993077],[81.054426,6.992646],[81.054485,6.992006],[81.054429,6.991516],[81.054316,6.990817],[81.054398,6.990797],[81.05474,6.990769],[81.054867,6.990729],[81.054945,6.990699],[81.055081,6.990648],[81.055325,6.990522],[81.056071,6.990062],[81.056098,6.990048],[81.056135,6.99003],[81.056253,6.989982],[81.056522,6.989907],[81.056669,6.989877],[81.056807,6.989847],[81.056943,6.98982],[81.057096,6.989845],[81.057287,6.989862],[81.05784,6.989875],[81.058305,6.989917],[81.058354,6.989933],[81.058382,6.989929],[81.058414,6.989924],[81.058436,6.989921],[81.058446,6.989917],[81.05846,6.989913],[81.058477,6.989902],[81.058498,6.989884],[81.058511,6.989873],[81.058539,6.989849],[81.058556,6.989781],[81.058593,6.989629],[81.058658,6.989365],[81.058703,6.989232],[81.058738,6.989097],[81.058845,6.988827],[81.058942,6.988497],[81.059135,6.987871],[81.059301,6.987427],[81.059619,6.986552],[81.059882,6.985825],[81.059962,6.985624],[81.060291,6.98482],[81.060316,6.9847],[81.06034,6.984702],[81.060363,6.984694],[81.060381,6.984677],[81.060391,6.984648],[81.060385,6.984618],[81.060365,6.984595],[81.060336,6.984586],[81.060306,6.984592],[81.060281,6.984473],[81.060193,6.984138],[81.060201,6.984093],[81.060207,6.984044],[81.060202,6.983936],[81.059994,6.982688],[81.059978,6.982404],[81.05999,6.981977],[81.059992,6.981891],[81.06002,6.981552],[81.060028,6.981422],[81.060036,6.981293],[81.060267,6.981089],[81.060618,6.980914],[81.060684,6.980856],[81.060782,6.98064],[81.061554,6.978998],[81.06199,6.978176],[81.06224,6.9777]]",
    __v: 0,
  });

  useEffect(() => {
    axios
      .get("http://localhost:8082/route")
      .then((response) => {
        setRoutes(response.data);
      })
      .catch((error) => {
        console.log(error);
      });
  }, []);

  useEffect(() => {
    console.log(selectedRoute);
  }, [selectedRoute]);

  return (
    <Grid container>
      <TrackingLeftSide
        routes={routes}
        setRoutes={setRoutes}
        setSelectedRoute={setSelectedRoute}
      />
      <TrackingRightSide routeDetails={selectedRoute} />
    </Grid>
  );
};

export default Tracking;
